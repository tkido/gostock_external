package page

import (
	"testing"
)

// func TestTemplate(t *testing.T) {
// 	m := map[string]string{"決算": "2017年11月10日", "ROE": "29.75%", "年安日": "17/01/10", "売残": "69700", "従連": "227", "市": "東1", "利": "0.46%", "Vol": "0.089630", "年安": "1430", "RCI": "0.851128", "tdnet": "<h3>TDnet短信（前年同期比）</h3>\n<table border=\"2\" class=\"numbers\"><tbody>\n<tr><th>終了月</th><th>Q</th><th>売上</th><th>営利</th><th>経利</th><th>純利</th><th>開示日</th></tr>\n<tr><td>2017-12</td><td>1</td><td>19%</td><td>66%</td><td>63%</td><td>67%</td><td>2018-02-02</td></tr>\n<tr><td>2017-09</td><td>4</td><td>18%</td><td>72%</td><td>83%</td><td>73%</td><td>2017-11-10</td></tr>\n</tbody></table>\n<h3>TDnet短信（金額）</h3>\n<table border=\"2\" class=\"numbers\"><tbody>\n<tr><th>終了月</th><th>Q</th><th>売上</th><th>営利</th><th>経利</th><th>純利</th><th>開示日</th></tr>\n<tr><td>2017-12</td><td>1</td><td>1.05B</td><td>244M</td><td>245M</td><td>165M</td><td>2018-02-02</td></tr>\n<tr><td>2017-09</td><td>4</td><td>964M</td><td>174M</td><td>174M</td><td>128M</td><td>2017-11-10</td></tr>\n<tr><td>2017-06</td><td>3</td><td>967M</td><td>184M</td><td>184M</td><td>120M</td><td>2017-07-28</td></tr>\n<tr><td>2017-03</td><td>2</td><td>770M</td><td>87.0M</td><td>100M</td><td>65.0M</td><td>2017-05-12</td></tr>\n<tr><td>2016-12</td><td>1</td><td>884M</td><td>147M</td><td>150M</td><td>99.0M</td><td>2017-01-27</td></tr>\n<tr><td>2016-09</td><td>4</td><td>818M</td><td>101M</td><td>95.0M</td><td>74.0M</td><td>2016-11-11</td></tr>\n</tbody></table>\n", "PER": "64.41", "年高日": "18/01/24", "上場": "2016", "edinet": "<h3>EDINET有価証券報告書</h3>\n<table border=\"2\" class=\"numbers\"><tbody>\n<tr><th>終了月</th><th>解価</th><th>NetC</th><th>アク</th><th>FCF</th><th>純利</th><th>売上</th><th>粗率</th><th>営率</th><th>経率</th><th>純率</th><th>開示日</th></tr>\n<tr><td>2017-09</td><td>1.02B</td><td>1.46B</td><td><span class=\"minus\">-213M</span></td><td>540M</td><td>412M</td><td>3.58B</td><td>67%</td><td>17%</td><td>17%</td><td>12%</td><td>2017-12-21</td></tr>\n<tr><td>2016-09</td><td>968M</td><td>1.22B</td><td><span class=\"minus\">-91.5M</span></td><td>269M</td><td>298M</td><td>2.91B</td><td>67%</td><td>16%</td><td>16%</td><td>10%</td><td>2016-12-22</td></tr>\n</tbody></table>\n", "更新": "2018/03/16", "週出": "=136360/【発行】*1000", "代表": "舟橋孝之", "現値": "4310", "設立": "2002", "SPR": "0.750969", "月出": "=134675/【発行】*1000", "買残": "199500", "発行": "8458300", "名称": "インソース", "齢": "30.1", "日出": "=97100/【発行】*1000", "売残週差": "-3400", "買残週差": "-18700", "前終": "4305", "事業": "	【連結事業】国内通信35(23)、スプリント39(5)、ヤフー9(22)、流通14(-1)、アーム1(11)、他1(-13)【海外】51(2017.3)", "年高": "4830", "収": "", "特色": " 企業等の人事部向けに講師派遣型研修、公開講座を運営。人事や営業サポートシステムも展開", "ID": "6200", "出来": "70700", "PBR": "23.86", "決期": "9月", "企価": "7.2164332e+09", "従単": "216", "前比": "+0.12", "自": "61.3%", "分類": "サービス業"}
// 	addedData := addData(m)
// 	got := template.Execute(pageTmpl, addedData)
// 	b, err := ioutil.ReadFile("./testdata/result.html")
// 	if err != nil {
// 		t.Fatal(err)
// 	}
// 	want := string(b)
// 	if got != want {
// 		t.Errorf("got %v want %v", got, want)
// 	}
// }

func TestWrite(t *testing.T) {
	m := map[string]string{"決算": "2017年11月10日", "ROE": "29.75%", "年安日": "17/01/10", "売残": "69700", "従連": "227", "市": "東1", "利": "0.46%", "Vol": "0.089630", "年安": "1430", "RCI": "0.851128", "tdnet": "<h3>TDnet短信（前年同期比）</h3>\n<table border=\"2\" class=\"numbers\"><tbody>\n<tr><th>終了月</th><th>Q</th><th>売上</th><th>営利</th><th>経利</th><th>純利</th><th>開示日</th></tr>\n<tr><td>2017-12</td><td>1</td><td>19%</td><td>66%</td><td>63%</td><td>67%</td><td>2018-02-02</td></tr>\n<tr><td>2017-09</td><td>4</td><td>18%</td><td>72%</td><td>83%</td><td>73%</td><td>2017-11-10</td></tr>\n</tbody></table>\n<h3>TDnet短信（金額）</h3>\n<table border=\"2\" class=\"numbers\"><tbody>\n<tr><th>終了月</th><th>Q</th><th>売上</th><th>営利</th><th>経利</th><th>純利</th><th>開示日</th></tr>\n<tr><td>2017-12</td><td>1</td><td>1.05B</td><td>244M</td><td>245M</td><td>165M</td><td>2018-02-02</td></tr>\n<tr><td>2017-09</td><td>4</td><td>964M</td><td>174M</td><td>174M</td><td>128M</td><td>2017-11-10</td></tr>\n<tr><td>2017-06</td><td>3</td><td>967M</td><td>184M</td><td>184M</td><td>120M</td><td>2017-07-28</td></tr>\n<tr><td>2017-03</td><td>2</td><td>770M</td><td>87.0M</td><td>100M</td><td>65.0M</td><td>2017-05-12</td></tr>\n<tr><td>2016-12</td><td>1</td><td>884M</td><td>147M</td><td>150M</td><td>99.0M</td><td>2017-01-27</td></tr>\n<tr><td>2016-09</td><td>4</td><td>818M</td><td>101M</td><td>95.0M</td><td>74.0M</td><td>2016-11-11</td></tr>\n</tbody></table>\n", "PER": "64.41", "年高日": "18/01/24", "上場": "2016", "edinet": "<h3>EDINET有価証券報告書</h3>\n<table border=\"2\" class=\"numbers\"><tbody>\n<tr><th>終了月</th><th>解価</th><th>NetC</th><th>アク</th><th>FCF</th><th>純利</th><th>売上</th><th>粗率</th><th>営率</th><th>経率</th><th>純率</th><th>開示日</th></tr>\n<tr><td>2017-09</td><td>1.02B</td><td>1.46B</td><td><span class=\"minus\">-213M</span></td><td>540M</td><td>412M</td><td>3.58B</td><td>67%</td><td>17%</td><td>17%</td><td>12%</td><td>2017-12-21</td></tr>\n<tr><td>2016-09</td><td>968M</td><td>1.22B</td><td><span class=\"minus\">-91.5M</span></td><td>269M</td><td>298M</td><td>2.91B</td><td>67%</td><td>16%</td><td>16%</td><td>10%</td><td>2016-12-22</td></tr>\n</tbody></table>\n", "更新": "2018/03/16", "週出": "=136360/【発行】*1000", "代表": "舟橋孝之", "現値": "4310", "設立": "2002", "SPR": "0.750969", "月出": "=134675/【発行】*1000", "買残": "199500", "発行": "8458300", "名称": "インソース", "齢": "30.1", "日出": "=97100/【発行】*1000", "売残週差": "-3400", "買残週差": "-18700", "前終": "4305", "事業": "	【連結事業】国内通信35(23)、スプリント39(5)、ヤフー9(22)、流通14(-1)、アーム1(11)、他1(-13)【海外】51(2017.3)", "年高": "4830", "収": "", "特色": " 企業等の人事部向けに講師派遣型研修、公開講座を運営。人事や営業サポートシステムも展開", "ID": "6200", "出来": "70700", "PBR": "23.86", "決期": "9月", "企価": "7.2164332e+09", "従単": "216", "前比": "+0.12", "自": "61.3%", "分類": "サービス業"}
	err := Write("./testdata/result.html", m)
	if err != nil {
		t.Fatal(err)
	}
}
